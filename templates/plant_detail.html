{% extends "base.html" %}

{% block content %}
<div class="plant-detail-container">
    <div class="breadcrumb">
        <a href="{{ url_for('home') }}"><i class="fas fa-home"></i> Home</a>
        <span class="separator">></span>
        <a href="{{ url_for('showproduct') }}"><i class="fas fa-leaf"></i> Plants</a>
        <span class="separator">></span>
        <span class="current">{{ plant.name }}</span>
    </div>

    <div class="plant-detail-card">
        <div class="plant-image-section">
            <div class="plant-image-container">
                <img src="{{ url_for('static', filename='images/' + plant.image) }}" 
                     alt="{{ plant.name }}" 
                     class="plant-image" 
                     id="mainImage">
                
                {% if plant.get('offer') %}
                    <div class="badge offer-badge">
                        <i class="fas fa-tag"></i> Special Offer
                    </div>
                {% endif %}
                
                {% if plant.get('new') %}
                    <div class="badge new-badge">
                        <i class="fas fa-star"></i> New Arrival
                    </div>
                {% endif %}
            </div>
            
            <div class="image-gallery">
                <div class="thumbnail active" onclick="changeImage('{{ url_for('static', filename='images/' + plant.image) }}')">
                    <img src="{{ url_for('static', filename='images/' + plant.image) }}" alt="Main view">
                </div>
                <!-- Additional thumbnails could be added here -->
            </div>
        </div>

        <div class="plant-info-section">
            <div class="plant-header">
                <h1 class="plant-name">{{ plant.name }}</h1>
                <div class="category-tag">
                    <i class="fas fa-tag"></i> {{ plant.category }}
                </div>
            </div>

            <div class="price-section">
                <span class="current-price">{{ plant.price }}</span>
                {% if plant.get('offer') %}
                    <span class="original-price">â‚¹{{ (plant.price[1:] | int * 1.2) | int }}</span>
                    <span class="discount-tag">20% OFF</span>
                {% endif %}
            </div>

            <div class="plant-description">
                <h3><i class="fas fa-info-circle"></i> About This Plant</h3>
                <div class="description-content">
                    {% if 'snake-plant' in request.endpoint or 'Snake Plant' in plant.name %}
                       
                        <p><strong>Why You'll Love It:</strong> Perfect for beginners and busy plant parents, it thrives on neglect and can survive in low light conditions. NASA studies show it's one of the top air-purifying plants, removing toxins like formaldehyde and benzene from your home.</p>
                    {% elif 'peace-lily' in request.endpoint or 'Peace Lily' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> Not only does it purify the air by removing harmful toxins, but it also acts as a natural humidity indicator - drooping slightly when it needs water. Its beautiful white flowers make it a stunning decorative piece.</p>
                    {% elif 'spider-plant' in request.endpoint or 'Spider Plant' in plant.name %}
                       
                        <p><strong>Why You'll Love It:</strong> Incredibly easy to propagate - you can create new plants from the babies! It's pet-safe, air-purifying, and adapts to various lighting conditions. Perfect for hanging baskets or as a tabletop centerpiece.</p>
                    {% elif 'hibiscus' in request.endpoint or 'Hibiscus' in plant.name %}
                       
                        <p><strong>Why You'll Love It:</strong> Each flower is a masterpiece that lasts just one day, but the plant continuously produces new blooms throughout the growing season. It attracts butterflies and hummingbirds, making your garden a wildlife haven.</p>
                    {% elif 'bougainvillea' in request.endpoint or 'Bougainvillea' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> Once established, it's incredibly low-maintenance and drought-resistant. The vibrant colors last for months, providing year-round interest. It's perfect for creating privacy screens or dramatic garden focal points.</p>
                    {% elif 'rose' in request.endpoint or 'Rose' in plant.name %}
                       
                        <p><strong>Why You'll Love It:</strong> From classic red roses to unique multicolored varieties, there's a rose for every garden style. Many varieties offer intoxicating fragrances that perfume your entire garden. Perfect for cutting gardens and romantic landscapes.</p>
                    {% elif 'lantana' in request.endpoint or 'Lantana' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> Extremely drought-tolerant once established, it thrives in hot, sunny conditions where other plants struggle. It's a butterfly magnet and requires minimal care while providing maximum impact.</p>
                    {% elif 'tulsi' in request.endpoint or 'Tulsi' in plant.name %}
                       
                        <p><strong>Why You'll Love It:</strong> Beyond its spiritual significance, Tulsi leaves can be used to make healing teas, natural remedies, and aromatic potpourri. It's easy to grow and naturally repels insects while attracting beneficial pollinators.</p>
                    {% elif 'mint' in request.endpoint or 'Mint' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> Perfect for teas, cocktails, desserts, and savory dishes. It grows rapidly and can be harvested continuously. The refreshing scent naturally deters ants and mice while attracting beneficial insects.</p>
                    {% elif 'aloe-vera' in request.endpoint or 'Aloe Vera' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> It's like having a first-aid kit in your garden! The gel soothes burns, cuts, and skin irritations. Incredibly low-maintenance and drought-tolerant, it thrives with minimal care while producing occasional spikes of orange or yellow flowers.</p>
                    {% elif 'curry-leaf' in request.endpoint or 'Curry Leaf' in plant.name %}
                       
                        <p><strong>Why You'll Love It:</strong> Fresh curry leaves elevate any Indian dish with their unique flavor that dried leaves simply can't match. The plant is easy to grow and provides a continuous harvest of fresh leaves for your culinary adventures.</p>
                    {% elif 'lemongrass' in request.endpoint or 'Lemongrass' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> Perfect for teas, Asian cuisine, and natural pest control. The stalks can be harvested for cooking, while the strong citrus scent keeps mosquitoes at bay. It's drought-tolerant and adds tropical flair to any landscape.</p>
                    {% elif 'jasmine' in request.endpoint or 'Jasmine' in plant.name %}
                       
                        <p><strong>Why You'll Love It:</strong> The flowers are traditionally used in religious ceremonies, hair decorations, and perfume making. The sweet fragrance is so powerful that just one plant can perfume an entire garden area. It's also believed to attract positive energy.</p>
                    {% elif 'marigold' in request.endpoint or 'Marigold' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> They're incredibly easy to grow from seed and bloom continuously until frost. Natural pest deterrents, they protect other plants from harmful insects. The flowers are edible and are used in traditional Indian festivals and ceremonies.</p>
                    {% elif 'chrysanthemum' in request.endpoint or 'Chrysanthemum' in plant.name %}
                        
                        <p><strong>Why You'll Love It:</strong> They provide spectacular color when most other flowers are fading. Available in numerous flower forms from tiny buttons to large decorative blooms. Many varieties are perennial, returning year after year with proper care.</p>
                    {% else %}
                        <p>{{ plant.description }}</p>
                        <p>This beautiful plant will make a wonderful addition to your home or garden. With proper care, it will thrive and bring you joy for years to come.</p>
                    {% endif %}
                </div>
            </div>

           

            

                <div class="total-price">
                    <span class="total-label">Total Price:</span>
                    <span class="total-amount" id="totalPrice">{{ plant.price }}</span>
                </div>
                <div class="order-section">
                <div class="quantity-selector">
                    <label for="quantity"><i class="fas fa-shopping-cart"></i> Quantity:</label>
                    <div class="quantity-controls">
                        <button type="button" class="qty-btn" onclick="decreaseQuantity()">-</button>
                        <input type="number" id="quantity" value="1" min="1" max="10" onchange="updateTotal()">
                        <button type="button" class="qty-btn" onclick="increaseQuantity()">+</button>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary order-btn" onclick="orderNow()">
                        <i class="fas fa-shopping-cart"></i> Order Now
                    </button>
                    <button class="btn btn-secondary wishlist-btn" onclick="addToWishlist()">
                        <i class="fas fa-heart"></i> Add to Wishlist
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Additional Information Tabs -->
    <div class="info-tabs">
        <div class="tab-headers">
            <button class="tab-header active" onclick="showTab('benefits')">
                <i class="fas fa-leaf"></i> Benefits
            </button>
            <button class="tab-header" onclick="showTab('placement')">
                <i class="fas fa-home"></i> Placement Tips
            </button>
            <button class="tab-header" onclick="showTab('troubleshooting')">
                <i class="fas fa-tools"></i> Troubleshooting
            </button>
        </div>

        <div class="tab-content">
            <div id="benefits" class="tab-pane active">
                <h4>Why Choose This Plant?</h4>
                <ul class="benefits-list">
                    {% if plant.category == 'Indoor' %}
                        <li><i class="fas fa-wind"></i> Purifies indoor air naturally</li>
                        <li><i class="fas fa-moon"></i> Releases oxygen at night</li>
                        <li><i class="fas fa-home"></i> Perfect for home dÃ©cor</li>
                        <li><i class="fas fa-battery-full"></i> Low maintenance required</li>
                    {% elif plant.category == 'Herbs' %}
                        <li><i class="fas fa-leaf"></i> Fresh herbs for cooking</li>
                        <li><i class="fas fa-heart"></i> Natural medicinal properties</li>
                        <li><i class="fas fa-bug"></i> Natural pest deterrent</li>
                        <li><i class="fas fa-recycle"></i> Sustainable living choice</li>
                    {% else %}
                        <li><i class="fas fa-rainbow"></i> Adds vibrant color to garden</li>
                        <li><i class="fas fa-butterfly"></i> Attracts beneficial insects</li>
                        <li><i class="fas fa-sun"></i> Weather resistant variety</li>
                        <li><i class="fas fa-calendar-alt"></i> Long blooming season</li>
                    {% endif %}
                </ul>
            </div>

            <div id="placement" class="tab-pane">
                <h4>Perfect Placement Ideas</h4>
                <div class="placement-grid">
                    {% if plant.category == 'Indoor' %}
                        <div class="placement-item">
                            <i class="fas fa-couch"></i>
                            <span>Living Room</span>
                            <small>Near windows for bright light</small>
                        </div>
                        <div class="placement-item">
                            <i class="fas fa-bed"></i>
                            <span>Bedroom</span>
                            <small>Improves air quality while you sleep</small>
                        </div>
                        <div class="placement-item">
                            <i class="fas fa-briefcase"></i>
                            <span>Office Space</span>
                            <small>Reduces stress and increases productivity</small>
                        </div>
                    {% else %}
                        <div class="placement-item">
                            <i class="fas fa-tree"></i>
                            <span>Garden Border</span>
                            <small>Perfect for landscape edges</small>
                        </div>
                        <div class="placement-item">
                            <i class="fas fa-home"></i>
                            <span>Entrance</span>
                            <small>Welcome guests with beauty</small>
                        </div>
                        <div class="placement-item">
                            <i class="fas fa-seedling"></i>
                            <span>Containers</span>
                            <small>Great for patio and balcony</small>
                        </div>
                    {% endif %}
                </div>
            </div>

            <div id="troubleshooting" class="tab-pane">
                <h4>Common Issues & Solutions</h4>
                <div class="troubleshooting-list">
                    <div class="issue-item">
                        <div class="issue-problem">
                            <i class="fas fa-exclamation-triangle text-warning"></i>
                            <strong>Yellowing Leaves</strong>
                        </div>
                        <div class="issue-solution">
                            Usually indicates overwatering. Allow soil to dry between waterings.
                        </div>
                    </div>
                    <div class="issue-item">
                        <div class="issue-problem">
                            <i class="fas fa-exclamation-triangle text-warning"></i>
                            <strong>Brown Leaf Tips</strong>
                        </div>
                        <div class="issue-solution">
                            Low humidity or water quality issues. Use filtered water and increase humidity.
                        </div>
                    </div>
                    <div class="issue-item">
                        <div class="issue-problem">
                            <i class="fas fa-exclamation-triangle text-warning"></i>
                            <strong>Slow Growth</strong>
                        </div>
                        <div class="issue-solution">
                            Insufficient light or nutrients. Move to brighter location and fertilize monthly.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Plant Detail Specific Styles */
.plant-detail-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.breadcrumb {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 2rem;
    font-size: 0.9rem;
    color: var(--text-muted);
}

.breadcrumb a {
    color: var(--primary-color);
    text-decoration: none;
    transition: color 0.3s ease;
}

.breadcrumb a:hover {
    color: var(--secondary-color);
}

.separator {
    color: var(--text-muted);
}

.current {
    color: var(--text-color);
    font-weight: 500;
}

.plant-detail-card {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    background: var(--surface-color);
    border-radius: 20px;
    padding: 3rem;
    box-shadow: var(--card-shadow);
    border: 1px solid var(--border-color);
    margin-bottom: 3rem;
}

.plant-image-section {
    position: relative;
}

.plant-image-container {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: var(--shadow);
    margin-bottom: 1rem;
}

.plant-image {
    width: 100%;
    height: 500px;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.plant-image:hover {
    transform: scale(1.05);
}

.badge {
    position: absolute;
    top: 20px;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    color: white;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.offer-badge {
    right: 20px;
    background: linear-gradient(135deg, #ff6b6b, #ee5a24);
    animation: pulse 2s infinite;
}

.new-badge {
    left: 20px;
    background: linear-gradient(135deg, #4834d4, #686de0);
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.image-gallery {
    display: flex;
    gap: 10px;
    justify-content: center;
}

.thumbnail {
    width: 80px;
    height: 80px;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    border: 3px solid transparent;
    transition: all 0.3s ease;
}

.thumbnail.active {
    border-color: var(--primary-color);
    transform: scale(1.05);
}

.thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.plant-info-section {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.plant-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
}

.plant-name {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary-color);
    line-height: 1.2;
    margin: 0;
}

.category-tag {
    background: linear-gradient(135deg, var(--accent-color), var(--light-green));
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    white-space: nowrap;
}

.price-section {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.current-price {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary-color);
}

.original-price {
    font-size: 1.5rem;
    color: var(--text-muted);
    text-decoration: line-through;
}

.discount-tag {
    background: linear-gradient(135deg, #ff6b6b, #ee5a24);
    color: white;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    animation: pulse 2s infinite;
}

.plant-description {
    background: var(--bg-color);
    padding: 2rem;
    border-radius: 15px;
    border-left: 4px solid var(--primary-color);
}

.plant-description h3 {
    color: var(--primary-color);
    margin-bottom: 1rem;
    font-size: 1.3rem;
}

.description-content p {
    margin-bottom: 1rem;
    line-height: 1.8;
}

.care-tips {
    background: var(--bg-color);
    padding: 2rem;
    border-radius: 15px;
    border-left: 4px solid var(--accent-color);
}

.care-tips h3 {
    color: var(--primary-color);
    margin-bottom: 1.5rem;
    font-size: 1.3rem;
}

.care-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
}

.care-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 1rem;
    background: var(--surface-color);
    border-radius: 12px;
    box-shadow: var(--shadow);
    transition: transform 0.3s ease;
}

.care-item:hover {
    transform: translateY(-5px);
}

.care-item i {
    font-size: 2rem;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
}

.care-item span {
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 0.25rem;
}

.care-item small {
    color: var(--text-muted);
    font-size: 0.8rem;
}

.order-section {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    padding: 2.5rem;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
}

.quantity-selector {
    margin-bottom: 2rem;
}

.quantity-selector label {
    display: block;
    margin-bottom: 1rem;
    font-size: 1.1rem;
    font-weight: 600;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 0;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    width: fit-content;
}

.qty-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 20px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.qty-btn:hover {
    background: var(--secondary-color);
}

#quantity {
    border: none;
    padding: 12px 20px;
    font-size: 1.1rem;
    font-weight: 600;
    text-align: center;
    width: 80px;
    background: #f8f9fa; /* Light gray background instead of white */
    color: #2c3e50; /* Dark text color for contrast */
    border-left: 1px solid #dee2e6;
    border-right: 1px solid #dee2e6;
}

#quantity:focus {
    outline: none;
    background: #e9ecef; /* Slightly darker when focused */
    color: #1a252f; /* Even darker text when focused */
}



.total-price {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 2rem;
    padding: 1rem;
    background: rgba(255,255,255,0.15);
    border-radius: 12px;
}

.action-buttons {
    display: flex;
    gap: 1rem;
}

.action-buttons .btn {
    flex: 1;
    background: white;
    color: var(--primary-color);
    border: 2px solid white;
    font-weight: 600;
    padding: 15px 25px;
}

.action-buttons .btn:hover {
    background: transparent;
    color: white;
    border-color: white;
    transform: translateY(-3px);
}

.info-tabs {
    background: var(--surface-color);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: var(--card-shadow);
    border: 1px solid var(--border-color);
}

.tab-headers {
    display: flex;
    background: var(--bg-color);
    border-bottom: 1px solid var(--border-color);
}

.tab-header {
    flex: 1;
    padding: 1.5rem 2rem;
    border: none;
    background: transparent;
    color: var(--text-muted);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    border-bottom: 3px solid transparent;
}

.tab-header.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
    background: var(--surface-color);
}

.tab-header:hover {
    color: var(--primary-color);
    background: var(--surface-color);
}

.tab-content {
    padding: 3rem;
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

.tab-pane h4 {
    color: var(--primary-color);
    margin-bottom: 1.5rem;
    font-size: 1.4rem;
}

.benefits-list {
    list-style: none;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
}

.benefits-list li {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 1rem;
    background: var(--bg-color);
    border-radius: 12px;
    transition: transform 0.3s ease;
}

.benefits-list li:hover {
    transform: translateX(10px);
}

.benefits-list i {
    color: var(--primary-color);
    font-size: 1.2rem;
}

.placement-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
}

.placement-item {
    text-align: center;
    padding: 2rem;
    background: var(--bg-color);
    border-radius: 15px;
    transition: transform 0.3s ease;
}

.placement-item:hover {
    transform: translateY(-5px);
}

.placement-item i {
    font-size: 3rem;
    color: var(--primary-color);
    margin-bottom: 1rem;
}

.placement-item span {
    display: block;
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--text-color);
    margin-bottom: 0.5rem;
}

.placement-item small {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.troubleshooting-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.issue-item {
    padding: 1.5rem;
    background: var(--bg-color);
    border-radius: 12px;
    border-left: 4px solid var(--warning-color);
}

.issue-problem {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 0.5rem;
}

.issue-problem strong {
    color: var(--text-color);
}

.issue-solution {
    color: var(--text-muted);
    margin-left: 2rem;
    line-height: 1.6;
}

.text-warning {
    color: var(--warning-color) !important;
}

/* Responsive Design */
@media (max-width: 768px) {
    .plant-detail-card {
        grid-template-columns: 1fr;
        gap: 2rem;
        padding: 2rem;
    }
    
    .plant-name {
        font-size: 2rem;
    }
    
    .plant-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .care-grid {
        grid-template-columns: 1fr;
    }
    
    .action-buttons {
        flex-direction: column;
    }
    
    .tab-headers {
        flex-direction: column;
    }
    
    .benefits-list {
        grid-template-columns: 1fr;
    }
    
    .placement-grid {
        grid-template-columns: 1fr;
    }
    
    .current-price {
        font-size: 2rem;
    }
    
    .plant-image {
        height: 300px;
    }
}

@media (max-width: 480px) {
    .plant-detail-container {
        padding: 0 10px;
    }
    
    .breadcrumb {
        font-size: 0.8rem;
        flex-wrap: wrap;
    }
    
    .order-section {
        padding: 1.5rem;
    }
    
    .tab-content {
        padding: 1.5rem;
    }
    
    .quantity-controls {
        width: 100%;
        justify-content: center;
    }
    
    #quantity {
        width: 60px;
    }
}

/* Animation for loading states */
.loading-skeleton {
    background: linear-gradient(90deg, var(--bg-color) 25%, var(--border-color) 50%, var(--bg-color) 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
}

@keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* Accessibility improvements */
.btn:focus,
.tab-header:focus,
.qty-btn:focus {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* Print styles */
@media print {
    .action-buttons,
    .info-tabs,
    .breadcrumb {
        display: none;
    }
    
    .plant-detail-card {
        grid-template-columns: 1fr;
        box-shadow: none;
        border: 1px solid #ccc;
    }
}
</style>

<script>
// Global variables
let basePrice = parseFloat('{{ plant.price }}'.replace('â‚¹', '').replace(',', ''));
let currentQuantity = 1;

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    updateTotal();
    
    // Add smooth transitions to all interactive elements
    const interactiveElements = document.querySelectorAll('.btn, .tab-header, .thumbnail, .care-item');
    interactiveElements.forEach(element => {
        element.style.transition = 'all 0.3s ease';
    });
});

// Image gallery functionality
function changeImage(imageSrc) {
    const mainImage = document.getElementById('mainImage');
    const thumbnails = document.querySelectorAll('.thumbnail');
    
    // Update main image with fade effect
    mainImage.style.opacity = '0.5';
    setTimeout(() => {
        mainImage.src = imageSrc;
        mainImage.style.opacity = '1';
    }, 150);
    
    // Update active thumbnail
    thumbnails.forEach(thumb => thumb.classList.remove('active'));
    event.target.closest('.thumbnail').classList.add('active');
}

// Quantity control functions
function increaseQuantity() {
    const quantityInput = document.getElementById('quantity');
    const maxQuantity = parseInt(quantityInput.max);
    
    if (currentQuantity < maxQuantity) {
        currentQuantity++;
        quantityInput.value = currentQuantity;
        updateTotal();
        
        // Add visual feedback
        quantityInput.style.transform = 'scale(1.1)';
        setTimeout(() => {
            quantityInput.style.transform = 'scale(1)';
        }, 200);
    } else {
        // Show max quantity reached feedback
        showNotification('Maximum quantity reached!', 'warning');
    }
}

function decreaseQuantity() {
    const quantityInput = document.getElementById('quantity');
    
    if (currentQuantity > 1) {
        currentQuantity--;
        quantityInput.value = currentQuantity;
        updateTotal();
        
        // Add visual feedback
        quantityInput.style.transform = 'scale(0.9)';
        setTimeout(() => {
            quantityInput.style.transform = 'scale(1)';
        }, 200);
    } else {
        showNotification('Minimum quantity is 1!', 'warning');
    }
}

function updateTotal() {
    const quantityInput = document.getElementById('quantity');
    const totalPriceElement = document.getElementById('totalPrice');
    
    currentQuantity = parseInt(quantityInput.value) || 1;
    const totalPrice = basePrice * currentQuantity;
    
    // Animate the price change
    totalPriceElement.style.transform = 'scale(1.1)';
    totalPriceElement.style.color = 'var(--success-color)';
    
    setTimeout(() => {
        totalPriceElement.textContent = `â‚¹${totalPrice.toLocaleString()}`;
        totalPriceElement.style.transform = 'scale(1)';
        totalPriceElement.style.color = '';
    }, 200);
}

// Tab functionality
function showTab(tabName) {
    const tabHeaders = document.querySelectorAll('.tab-header');
    const tabPanes = document.querySelectorAll('.tab-pane');
    
    // Remove active class from all tabs
    tabHeaders.forEach(header => header.classList.remove('active'));
    tabPanes.forEach(pane => {
        pane.classList.remove('active');
        pane.style.opacity = '0';
    });
    
    // Add active class to clicked tab
    event.target.classList.add('active');
    const targetPane = document.getElementById(tabName);
    
    setTimeout(() => {
        targetPane.classList.add('active');
        targetPane.style.opacity = '1';
    }, 150);
}

// Order functionality
// Option 1: Direct redirect without any delay
function orderNow() {
    const plantName = '{{ plant.name }}';
    const plantPrice = basePrice;
    const plantImage = '{{ plant.image }}';
    
    // Prepare order data
    const orderData = {
        plant_name: plantName,
        plant_price: plantPrice,
        plant_image: plantImage,
        quantity: currentQuantity,
        total_price: plantPrice * currentQuantity,
        plant_category: '{{ plant.category }}'
    };
    
    // Store order data in sessionStorage
    sessionStorage.setItem('orderData', JSON.stringify(orderData));
    
    // Direct redirect to delivery info page
    window.location.href = "{{ url_for('deliveryinfo') }}";
}

// Option 2: With brief loading state (if you want minimal feedback)
function orderNowWithLoading() {
    const orderBtn = document.querySelector('.order-btn');
    const plantName = '{{ plant.name }}';
    const plantPrice = basePrice;
    const plantImage = '{{ plant.image }}';
    
    // Show brief loading state
    const originalText = orderBtn.innerHTML;
    orderBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
    orderBtn.disabled = true;
    
    // Prepare order data
    const orderData = {
        plant_name: plantName,
        plant_price: plantPrice,
        plant_image: plantImage,
        quantity: currentQuantity,
        total_price: plantPrice * currentQuantity,
        plant_category: '{{ plant.category }}'
    };
    
    // Store order data in sessionStorage
    sessionStorage.setItem('orderData', JSON.stringify(orderData));
    
    // Quick redirect after brief delay
    setTimeout(() => {
        window.location.href = "{{ url_for('deliveryinfo') }}";
    }, 500);
}
// Wishlist functionality
function addToWishlist() {
    const wishlistBtn = document.querySelector('.wishlist-btn');
    const originalText = wishlistBtn.innerHTML;
    
    // Check if already in wishlist
    const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
    const plantId = '{{ plant.get("id", plant.name) }}';
    
    if (wishlist.includes(plantId)) {
        showNotification('Already in wishlist!', 'info');
        return;
    }
    
    // Add to wishlist
    wishlist.push(plantId);
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
    
    



    // Visual feedback
    wishlistBtn.innerHTML = '<i class="fas fa-heart"></i> Added to Wishlist!';
    wishlistBtn.style.background = 'var(--success-color)';
    wishlistBtn.style.color = 'white';
    
    showNotification('Added to wishlist successfully!', 'success');
    
    setTimeout(() => {
        wishlistBtn.innerHTML = originalText;
        wishlistBtn.style.background = '';
        wishlistBtn.style.color = '';
    }, 2000);
}

// Notification system
function showNotification(message, type = 'info') {
    // Remove existing notifications
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    // Create notification element
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
        <i class="fas fa-${getNotificationIcon(type)}"></i>
        <span>${message}</span>
        <button onclick="this.parentElement.remove()" class="notification-close">
            <i class="fas fa-times"></i>
        </button>
    `;
    
    // Add styles
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--surface-color);
        color: var(--text-color);
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: var(--card-shadow);
        border-left: 4px solid var(--${type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'primary'}-color);
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 10000;
        animation: slideIn 0.3s ease;
        max-width: 300px;
    `;
    
    document.body.appendChild(notification);
    
    // Auto remove after 3 seconds
    setTimeout(() => {
        if (notification.parentElement) {
            notification.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => notification.remove(), 300);
        }
    }, 3000);
}

function getNotificationIcon(type) {
    switch(type) {
        case 'success': return 'check-circle';
        case 'warning': return 'exclamation-triangle';
        case 'error': return 'times-circle';
        default: return 'info-circle';
    }
}

// Add CSS animations for notifications
const notificationStyles = document.createElement('style');
notificationStyles.textContent = `
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOut {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
    
    .notification-close {
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        padding: 0;
        margin-left: auto;
        font-size: 0.9rem;
    }
    
    .notification-close:hover {
        color: var(--text-color);
    }
`;
document.head.appendChild(notificationStyles);

// Keyboard navigation support
document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowUp' && e.target.id === 'quantity') {
        e.preventDefault();
        increaseQuantity();
    } else if (e.key === 'ArrowDown' && e.target.id === 'quantity') {
        e.preventDefault();
        decreaseQuantity();
    }
});

// Image zoom functionality
document.getElementById('mainImage').addEventListener('click', function() {
    const modal = document.createElement('div');
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        cursor: pointer;
    `;
    
    const img = document.createElement('img');
    img.src = this.src;
    img.style.cssText = `
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
        border-radius: 10px;
    `;
    
    modal.appendChild(img);
    document.body.appendChild(modal);
    
    modal.addEventListener('click', function() {
        document.body.removeChild(modal);
    });
});

// Lazy loading for better performance
if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove('loading-skeleton');
                observer.unobserve(img);
            }
        });
    });
    
    document.querySelectorAll('img[data-src]').forEach(img => {
        imageObserver.observe(img);
    });
}
</script>

{% endblock %}